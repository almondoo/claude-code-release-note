{
  "2.1.41": [
    {
      "t": "修正: AWS 認証のリフレッシュが無期限にハングする問題に 3 分のタイムアウトを追加",
      "tags": ["バグ修正", "Platform"],
      "detail": "AWS (Amazon Bedrock) 経由で Claude Code を使用している場合、認証トークンのリフレッシュ処理が応答を返さずに無期限にハングすることがありました。この問題により、セッションが完全にフリーズし、ユーザーは手動でプロセスを終了する必要がありました。今回の修正で 3 分のタイムアウトが追加され、リフレッシュが失敗した場合でもセッションが回復可能になりました。タイムアウト後は適切なエラーメッセージが表示され、再認証を促すようになります。",
      "category": "プラットフォーム互換性"
    },
    {
      "t": "追加: `claude auth login`、`claude auth status`、`claude auth logout` CLI サブコマンド",
      "tags": ["新機能"],
      "detail": "認証管理のための専用 CLI サブコマンドが追加されました。`claude auth login` で対話的なログインフローを開始、`claude auth status` で現在の認証状態（ログイン済みのアカウント、使用中のプロバイダー等）を確認、`claude auth logout` でログアウトを実行できます。これにより、認証に関する操作をターミナルから直接制御でき、CI/CD 環境でのセットアップやトラブルシューティングが容易になりました。",
      "category": "コマンド"
    },
    {
      "t": "追加: Windows ARM64 (win32-arm64) ネイティブバイナリのサポート",
      "tags": ["新機能", "Platform"],
      "detail": "Windows ARM64 アーキテクチャ（Snapdragon X Elite 搭載の Surface Pro などの ARM ベース Windows デバイス）向けのネイティブバイナリが追加されました。これまで ARM64 Windows ユーザーは x64 エミュレーション経由で実行する必要がありましたが、ネイティブバイナリにより起動速度とパフォーマンスが向上します。",
      "category": "プラットフォーム互換性"
    },
    {
      "t": "改善: `/rename` が引数なしで呼び出された際に会話コンテキストからセッション名を自動生成",
      "tags": ["改善"],
      "detail": "`/rename` コマンドが引数なしで実行された場合に、会話の内容を分析して適切なセッション名を自動生成するようになりました。以前は引数が必須でしたが、この改善により手動で名前を考える手間が省け、後からセッションを見つけやすくなります。自動生成される名前は会話のトピックや主要なアクションに基づいており、`/resume` でセッションを探す際に直感的な名前が表示されます。",
      "category": "セッション管理"
    },
    {
      "t": "改善: 狭いターミナルでのプロンプトフッターのレイアウト",
      "tags": ["改善"],
      "detail": "ターミナルの幅が狭い場合のプロンプトフッター（入力欄下部のステータス表示）のレイアウトが改善されました。小さいターミナルウィンドウやモバイル端末からの SSH 接続時に、フッターの情報が折り返しや重なりなく適切に表示されるようになりました。",
      "category": "レンダリング"
    },
    {
      "t": "修正: アンカーフラグメント付きの @メンションでファイル解決が失敗する問題",
      "tags": ["バグ修正"],
      "detail": "`@README.md#installation` のようにアンカーフラグメント（# 以降の部分）付きでファイルを @メンションした際に、ファイルの解決が失敗する問題が修正されました。以前はフラグメント部分がファイルパスの一部として解釈されてしまい、ファイルが見つからないエラーになっていました。修正により、アンカーフラグメントが適切にパースされ、ファイル本体の内容が正しく参照されるようになりました。",
      "category": "入力"
    },
    {
      "t": "修正: FileReadTool が FIFO、`/dev/stdin`、大きなファイルでプロセスをブロックする問題",
      "tags": ["バグ修正"],
      "detail": "FileReadTool（ファイル読み取りツール）が FIFO（名前付きパイプ）、`/dev/stdin`、または非常に大きなファイルを読み取ろうとした際にプロセスが無期限にブロックされる問題が修正されました。FIFO や `/dev/stdin` はデータが供給されるまで読み取りがブロックされる特殊なファイルであり、通常のファイルとは異なる処理が必要です。修正により、これらの特殊ファイルに対する適切なハンドリングが追加され、プロセスのハングが防止されるようになりました。",
      "category": "ツール改善"
    },
    {
      "t": "修正: ストリーミング Agent SDK モードでバックグラウンドタスク通知が配信されない問題",
      "tags": ["バグ修正", "SDK"],
      "detail": "Agent SDK のストリーミングモードを使用している場合に、バックグラウンドで実行中のタスクの完了通知が正しく配信されない問題が修正されました。これにより、SDK 経由でストリーミング応答を受信しながらバックグラウンドタスクの進捗を追跡する際に、通知の欠落がなくなりました。",
      "category": "SDK"
    },
    {
      "t": "修正: 分類ルール入力でキーストロークごとにカーソルが末尾にジャンプする問題",
      "tags": ["バグ修正"],
      "detail": "パーミッションの分類ルール（classifier rule）を入力する際に、文字を打つたびにカーソルが入力フィールドの末尾にジャンプしてしまう問題が修正されました。この問題により、ルールの途中を編集することが困難でした。修正により、カーソル位置が正しく保持されるようになり、ルールの編集がスムーズに行えるようになりました。",
      "category": "入力"
    },
    {
      "t": "修正: Markdown リンクの表示テキストが生の URL に置き換えられる問題",
      "tags": ["バグ修正"],
      "detail": "Markdown のリンク記法 `[表示テキスト](URL)` で記述されたリンクにおいて、表示テキスト部分が無視されて生の URL のみが表示される問題が修正されました。修正により、リンクの表示テキストが正しくレンダリングされるようになり、出力の可読性が向上しました。",
      "category": "レンダリング"
    },
    {
      "t": "修正: auto-compact の失敗エラー通知がユーザーに表示される問題",
      "tags": ["バグ修正"],
      "detail": "コンテキストウィンドウが満杯に近づいた際に自動的に実行される auto-compact（自動圧縮）が失敗した場合に、内部エラーの通知がユーザーに表示されてしまう問題が修正されました。auto-compact の失敗は内部的にリトライされるため、ユーザーに通知する必要がないケースです。修正により、不要なエラー通知が抑制され、よりクリーンな操作体験が得られるようになりました。",
      "category": "UX"
    },
    {
      "t": "修正: パーミッション待ち時間がサブエージェントの経過時間表示に含まれる問題",
      "tags": ["バグ修正", "Agent"],
      "detail": "サブエージェント（Task ツールで起動されるエージェント）の実行結果に表示される経過時間に、ユーザーのパーミッション承認待ち時間が含まれてしまう問題が修正されました。これにより、パーミッションダイアログで待機した時間が差し引かれ、サブエージェントの実際の処理時間が正確に表示されるようになりました。",
      "category": "マルチエージェント"
    },
    {
      "t": "修正: プランモード中にプロアクティブ tick が発火する問題",
      "tags": ["バグ修正"],
      "detail": "プランモード（`--permission-mode plan`）で作業中に、プロアクティブ tick（モデルが自発的にアクションを起こすためのタイマーイベント）が発火してしまう問題が修正されました。プランモードはユーザーの承認を待つための状態であるため、プロアクティブな動作は不適切です。修正により、プランモード中は tick が抑制されるようになりました。",
      "category": "パーミッション"
    },
    {
      "t": "修正: 設定がディスク上で変更された際に古いパーミッションルールをクリアするように修正",
      "tags": ["バグ修正"],
      "detail": "設定ファイル（`settings.json` など）がディスク上で外部から変更された際に、古いパーミッションルールがセッション内でクリアされずに残ってしまう問題が修正されました。これにより、設定を編集して保存した後に、以前のルールが意図せず有効なまま残り続けることがなくなりました。設定変更が即座にパーミッションシステムに反映されるようになります。",
      "category": "パーミッション"
    },
    {
      "t": "修正: フックのブロックエラーで stderr の内容が UI に表示される問題",
      "tags": ["バグ修正"],
      "detail": "フック（hooks）がブロックエラー（exit code 2）を返した際に、stderr に出力された内容が UI 上でユーザーに直接表示されてしまう問題が修正されました。フックの stderr 出力はデバッグ情報を含むことがあり、すべてをユーザーに表示するのは適切ではありません。修正により、ブロックエラー時の stderr 内容の表示が適切に制御されるようになりました。",
      "category": "UX"
    }
  ],
  "2.1.42": [
    {
      "t": "改善: Zod スキーマ構築の遅延化による起動パフォーマンスの向上",
      "tags": ["Perf", "改善"],
      "detail": "Claude Code の起動時に行われる Zod スキーマ（入力バリデーション用のスキーマ定義）の構築処理が遅延実行されるようになりました。従来は起動時にすべてのスキーマを一括で構築していたため、初期化に時間がかかっていました。この変更により、スキーマは実際に必要になったタイミングで初めて構築されるため、起動時間が短縮されます。特に多数のツールや MCP サーバーを設定しているユーザーにとって体感できる改善です。",
      "category": "パフォーマンス"
    },
    {
      "t": "改善: システムプロンプトから日付を移動しプロンプトキャッシュのヒット率を向上",
      "tags": ["Perf", "改善"],
      "detail": "システムプロンプトに含まれていた日付情報が別の場所に移動されました。システムプロンプトは API リクエスト間でキャッシュされる部分ですが、日付が含まれていると日をまたいだ時点でキャッシュが無効化されてしまいます。日付を動的に変わらない部分から分離することで、プロンプトキャッシュのヒット率が向上し、API コストの削減とレスポンス速度の改善が期待できます。",
      "category": "パフォーマンス"
    },
    {
      "t": "追加: 対象ユーザーへの Opus 4.6 エフォート設定の一回限りの通知",
      "tags": ["新機能"],
      "detail": "Opus 4.6 のエフォート（effort）設定を利用可能なユーザーに対して、一回限りの通知（callout）が表示されるようになりました。エフォート設定は、モデルの応答品質とコスト・速度のバランスを調整する機能です。対象ユーザーがこの機能の存在に気づきやすくなり、必要に応じてエフォートレベルを調整することで、タスクに応じた最適な利用が可能になります。通知は一度表示された後は再表示されません。",
      "category": "UX"
    },
    {
      "t": "修正: /resume で中断メッセージがセッションタイトルとして表示される問題",
      "tags": ["バグ修正"],
      "detail": "/resume コマンドでセッション一覧を表示する際に、中断（interrupt）時のメッセージがセッションタイトルとして誤って表示される問題が修正されました。以前は、ユーザーが Ctrl+C などでセッションを中断した際の内部メッセージがタイトルとして採用されてしまい、セッションの内容を判別しにくくなっていました。修正により、中断メッセージが除外され、実際の会話内容に基づいた適切なタイトルが表示されるようになりました。",
      "category": "セッション管理"
    },
    {
      "t": "修正: 画像サイズ制限エラー時に /compact の使用を提案するように改善",
      "tags": ["バグ修正", "改善"],
      "detail": "画像の解像度が制限を超えている場合のエラーメッセージが改善され、/compact コマンドの使用を提案するようになりました。大きな画像を含む会話ではコンテキストウィンドウを圧迫しやすく、/compact で会話を圧縮することで画像データを含む古いメッセージを要約に置き換え、コンテキストの空きを確保できます。これにより、ユーザーはエラー発生時に適切な対処法をすぐに知ることができます。",
      "category": "UX"
    }
  ],
  "2.1.43": [
    {
      "t": "修正: `.claude/agents/` ディレクトリ内のエージェント以外の Markdown ファイルに対する不要な警告",
      "tags": ["バグ修正", "Agent"],
      "detail": "`.claude/agents/` ディレクトリにエージェント定義ではない通常の Markdown ファイル（例: README.md やメモ用のファイル）が存在する場合に、不要な警告メッセージが表示される問題が修正されました。エージェント定義ファイルには特定の frontmatter 構造が必要ですが、ディレクトリ内のすべての .md ファイルがエージェントファイルとして解析されていたため、要件を満たさないファイルに対して警告が出力されていました。修正により、エージェント定義として認識されないファイルは静かにスキップされるようになりました。",
      "category": "エージェント設定"
    },
    {
      "t": "修正: Vertex/Bedrock で structured-outputs ベータヘッダーが無条件に送信される問題",
      "tags": ["バグ修正", "Platform"],
      "detail": "structured-outputs（構造化出力）機能のベータヘッダーが、Vertex AI および Amazon Bedrock の API リクエストに無条件で送信されてしまう問題が修正されました。このベータヘッダーは Anthropic の直接 API 向けのものであり、Vertex/Bedrock のエンドポイントでは不要です。一部の環境ではこの不要なヘッダーがバリデーションエラーやリクエスト失敗の原因になる可能性がありました。修正により、ヘッダーが適切な API エンドポイントに対してのみ送信されるようになりました。",
      "category": "プラットフォーム互換性"
    }
  ],
  "2.1.44": [
    {
      "t": "修正: 認証リフレッシュエラー",
      "tags": ["バグ修正"],
      "detail": "認証トークンのリフレッシュ処理で発生するエラーが修正されました。長時間稼働するセッションで認証トークンが期限切れになった際の自動更新処理にエラーが発生する問題が解消されています。この修正により、認証トークンの自動リフレッシュがより確実に行われるようになり、セッション中の予期しない認証エラーが防止されます。",
      "category": "セキュリティ"
    }
  ],
  "2.1.45": [
    {
      "t": "追加: Claude Sonnet 4.6 のサポート",
      "tags": ["新機能"],
      "detail": "Claude Sonnet 4.6 モデルが Claude Code で利用可能になりました。Sonnet 4.6 は Claude 4.6 ファミリーの中でコストパフォーマンスに優れたモデルで、高速な応答速度と高い精度を両立しています。/model コマンドまたは設定からモデルを切り替えて使用できます。コーディングタスクの日常的な作業には Sonnet、より複雑な推論が必要な場合は Opus というように、タスクに応じたモデル選択が可能です。",
      "category": "コマンド"
    },
    {
      "t": "追加: `--add-dir` ディレクトリから `enabledPlugins` と `extraKnownMarketplaces` の読み込みをサポート",
      "tags": ["新機能", "Plugin"],
      "detail": "`--add-dir` で指定した追加ディレクトリの設定ファイルから、`enabledPlugins`（有効なプラグインリスト）と `extraKnownMarketplaces`（追加のマーケットプレイス）を読み込めるようになりました。これにより、チームやプロジェクト単位でプラグイン設定を共有することが容易になります。例えば、共有リポジトリに設定を配置しておけば、チームメンバー全員が同じプラグイン環境を簡単にセットアップできます。",
      "category": "設定"
    },
    {
      "t": "追加: スピナーチップをカスタマイズする `spinnerTipsOverride` 設定（カスタムチップ配列と `excludeDefault` オプション）",
      "tags": ["新機能"],
      "detail": "新しい `spinnerTipsOverride` 設定が追加され、Claude が処理中に表示されるスピナーチップ（ヒントメッセージ）をカスタマイズできるようになりました。`tips` フィールドにカスタムチップ文字列の配列を設定し、オプションで `excludeDefault: true` を指定するとデフォルトのチップを非表示にしてカスタムチップのみを表示できます。チーム固有の Tips やプロジェクト固有の注意事項をスピナーに表示するなど、ワークフローに合わせたカスタマイズが可能です。",
      "category": "設定"
    },
    {
      "t": "追加: SDK に `SDKRateLimitInfo` と `SDKRateLimitEvent` 型（レート制限ステータスのリアルタイム通知）",
      "tags": ["新機能", "SDK"],
      "detail": "Claude Agent SDK に `SDKRateLimitInfo` と `SDKRateLimitEvent` 型が追加されました。SDK を使用するアプリケーションがレート制限のステータス更新をリアルタイムに受信できるようになり、現在の使用率、リセット時刻、超過情報などを取得できます。これにより、SDK を利用したカスタムエージェントやアプリケーションでレート制限に関するユーザー通知や自動的なリクエスト調整を実装しやすくなりました。",
      "category": "SDK"
    },
    {
      "t": "修正: Agent Teams のチームメイトが Bedrock、Vertex、Foundry で失敗する問題（API プロバイダー環境変数の tmux プロセスへの伝播）",
      "tags": ["バグ修正", "Agent", "Platform"],
      "detail": "Agent Teams 機能でチームメイトエージェントを生成する際、Bedrock、Vertex、Foundry 経由で利用しているユーザーのセッションで失敗する問題が修正されました。原因は、tmux で生成されるチームメイトプロセスに API プロバイダーの認証に必要な環境変数（AWS_ACCESS_KEY_ID、GOOGLE_APPLICATION_CREDENTIALS 等）が伝播されていなかったことです。修正により、親プロセスの API プロバイダー環境変数がチームメイトプロセスに正しく引き継がれるようになりました。",
      "category": "マルチエージェント"
    },
    {
      "t": "修正: macOS でサンドボックスの一時ファイル書き込み時に \"operation not permitted\" エラーが発生する問題",
      "tags": ["バグ修正"],
      "detail": "macOS 環境でサンドボックスモードが有効な場合に、一時ファイルを書き込もうとすると「operation not permitted」エラーが発生する問題が修正されました。原因は、一時ディレクトリのパスがユーザー固有のものではなくシステム共通パスを使用していたため、サンドボックスのセキュリティ制限に抵触していたことです。修正により、正しいユーザーごとの一時ディレクトリ（per-user temp directory）が使用されるようになりました。",
      "category": "サンドボックス"
    },
    {
      "t": "修正: Task ツール（バックグラウンドエージェント）が完了時に `ReferenceError` でクラッシュする問題",
      "tags": ["バグ修正", "Agent"],
      "detail": "Task ツールを使用してバックグラウンドで起動したエージェントが、タスク完了時に `ReferenceError` でクラッシュする問題が修正されました。エージェントの実行結果を返す処理で未定義の変数を参照していたことが原因です。この修正により、バックグラウンドエージェントの完了処理が安定し、結果が確実にメインセッションに返されるようになりました。",
      "category": "マルチエージェント"
    },
    {
      "t": "修正: 画像ペースト時にオートコンプリート候補が Enter で受け入れられない問題",
      "tags": ["バグ修正"],
      "detail": "入力フィールドに画像をペーストした状態でオートコンプリートの候補が表示されている際に、Enter キーで候補を確定できない問題が修正されました。画像が添付された状態での入力処理に不具合があり、Enter キーイベントがオートコンプリートの確定ではなくメッセージ送信として処理されていました。修正により、画像の有無に関わらずオートコンプリートが正しく動作します。",
      "category": "入力"
    },
    {
      "t": "修正: サブエージェントが呼び出したスキルがコンパクション後にメインセッションのコンテキストに誤って表示される問題",
      "tags": ["バグ修正", "Agent"],
      "detail": "Task ツールで起動したサブエージェントがスキルを呼び出した場合、会話のコンパクション（自動圧縮）後にそのスキルの内容がメインセッションのコンテキストに誤って含まれてしまう問題が修正されました。サブエージェントのスキル呼び出し情報がコンパクション時にメインセッションのコンテキストに混入していたことが原因です。修正により、サブエージェントのスキルコンテキストがメインセッションから適切に分離されるようになりました。",
      "category": "マルチエージェント"
    },
    {
      "t": "修正: 起動のたびに `.claude.json.backup` ファイルが過剰に蓄積される問題",
      "tags": ["バグ修正"],
      "detail": "Claude Code の起動のたびに `.claude.json.backup` ファイルが新たに作成され、ディレクトリに大量のバックアップファイルが蓄積される問題が修正されました。設定ファイルのバックアップロジックが毎回新しいファイルを作成していたことが原因です。修正により、不要なバックアップの生成が抑制され、ディスクスペースの浪費が防止されます。",
      "category": "設定"
    },
    {
      "t": "修正: プラグインが提供するコマンド・エージェント・フックがインストール後に再起動なしで利用できない問題",
      "tags": ["バグ修正", "Plugin"],
      "detail": "プラグインをインストールした後、そのプラグインが提供するカスタムコマンド、エージェント定義、フックが即座に利用可能にならず、Claude Code の再起動が必要だった問題が修正されました。プラグインのインストール完了後にこれらのリソースが動的に読み込まれるようになり、再起動なしですぐに使用できるようになりました。",
      "category": "設定"
    },
    {
      "t": "改善: セッション履歴の即時読み込みを廃止し起動パフォーマンスを向上",
      "tags": ["Perf", "改善"],
      "detail": "起動時にセッション履歴を即座に読み込んでスタッツキャッシュを構築する処理が廃止されました。これにより、多数のセッション履歴を持つユーザーの起動時間が短縮されます。スタッツ情報は必要になった時点で遅延読み込みされるため、機能的な変更はありません。起動パフォーマンスが最も重視されるシナリオ（頻繁に Claude Code を起動する開発フロー）で特に効果的です。",
      "category": "パフォーマンス"
    },
    {
      "t": "改善: 大量の出力を生成するシェルコマンドのメモリ使用量を改善（RSS が無制限に増加しなくなった）",
      "tags": ["Perf", "改善"],
      "detail": "シェルコマンドが大量の出力を生成する場合に、プロセスの RSS（Resident Set Size）メモリが出力量に比例して際限なく増加する問題が改善されました。以前は `npm install` のような大量のログを出力するコマンドを実行するとメモリ使用量が数百 MB に達することがありました。改善により、出力データのバッファリングが最適化され、メモリ使用量が制御されるようになりました。長時間セッションでの安定性が向上しています。",
      "category": "パフォーマンス"
    },
    {
      "t": "改善: 折りたたまれた読み取り/検索グループでアクティブ中に処理中のファイル名や検索パターンをサマリー行の下に表示",
      "tags": ["改善"],
      "detail": "Read ツールや Grep ツールが複数のファイルを処理する際に表示される折りたたみグループが改善されました。処理がアクティブな間、サマリー行の下に現在処理中のファイル名や検索パターンがリアルタイムで表示されるようになりました。これにより、Claude がどのファイルを読んでいるか、何を検索しているかが一目でわかり、処理の進捗状況をより直感的に把握できます。",
      "category": "UX"
    },
    {
      "t": "VSCode: パーミッション保存先の選択（プロジェクト/ユーザー/セッション）がセッション間で永続化",
      "tags": ["IDE", "改善"],
      "detail": "VS Code 拡張機能で、パーミッション確認ダイアログの保存先選択（「このプロジェクト」「全プロジェクト」「セッションのみ」など）がセッション間で記憶されるようになりました。以前はセッションを開始するたびにデフォルトの保存先にリセットされていましたが、修正後はユーザーが最後に選択した保存先が次のセッションでも維持されます。繰り返しパーミッション設定を行う際の操作が簡素化されました。",
      "category": "IDE"
    }
  ]
}
