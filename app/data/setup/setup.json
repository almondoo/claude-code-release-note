{
  "sections": [
    {
      "id": "installation",
      "name": "インストール",
      "description": "Claude Code のインストール手順",
      "steps": [
        {
          "id": "install",
          "title": "Claude Code のインストール",
          "description": "ネイティブインストーラーまたはパッケージマネージャーでインストールします",
          "content": "Claude Code をインストールするには、以下のいずれかの方法を使います。ネイティブインストールが推奨です（バックグラウンドで自動更新されます）。\n\nHomebrew / WinGet 経由のインストールでは自動更新されないため、定期的に手動でアップグレードしてください。\n\nOS ごとの詳しいインストール手順は [公式ドキュメント](https://code.claude.com/docs/en/overview) を参照してください。",
          "code": [
            {
              "lang": "bash",
              "label": "ネイティブインストール (macOS / Linux / WSL)",
              "value": "curl -fsSL https://claude.ai/install.sh | bash",
              "recommended": true
            },
            {
              "lang": "powershell",
              "label": "ネイティブインストール (Windows PowerShell)",
              "value": "irm https://claude.ai/install.ps1 | iex"
            },
            {
              "lang": "bash",
              "label": "Homebrew (macOS / Linux)",
              "value": "brew install --cask claude-code"
            },
            {
              "lang": "powershell",
              "label": "WinGet (Windows)",
              "value": "winget install Anthropic.ClaudeCode"
            },
            {
              "lang": "bash",
              "label": "npm でインストール",
              "value": "npm install -g @anthropic-ai/claude-code"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "ネイティブインストールはバックグラウンドで自動更新されるため、常に最新版を利用できます。Homebrew / WinGet / npm の場合は手動更新が必要です。"
            }
          ],
          "tags": [
            "必須",
            "初心者向け"
          ]
        }
      ]
    },
    {
      "id": "initial-setup",
      "name": "初期セットアップ",
      "description": "初回起動時の基本的な設定",
      "steps": [
        {
          "id": "first-run",
          "title": "認証と初回起動",
          "description": "プロジェクトで claude を起動し、ログインします",
          "content": "インストールが完了したら、作業したいプロジェクトのディレクトリで `claude` コマンドを実行するだけです。初回起動時にブラウザが開き、Anthropic アカウントでのログインが求められます。\n\nClaude サブスクリプション（Max / Team プラン）または Anthropic Console アカウントが必要です。API キーや Bedrock / Vertex AI 経由での認証も利用可能です。",
          "code": [
            {
              "lang": "bash",
              "label": "プロジェクトで起動（初回はログイン画面が開く）",
              "value": "cd your-project\nclaude",
              "recommended": true
            },
            {
              "lang": "bash",
              "label": "API キーで認証する場合",
              "value": "export ANTHROPIC_API_KEY=sk-ant-xxxxx\nclaude"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "初回起動時にブラウザでログインするだけで認証完了です。API プランや企業利用では API キー・Bedrock・Vertex AI 経由の認証も選択できます。"
            }
          ],
          "tags": [
            "必須",
            "初心者向け"
          ]
        }
      ]
    },
    {
      "id": "claude-md",
      "name": "CLAUDE.md の設定",
      "description": "プロジェクトのカスタム指示を定義する",
      "steps": [
        {
          "id": "claude-md-overview",
          "title": "CLAUDE.md とは",
          "description": "プロジェクト固有の指示ファイル",
          "content": "CLAUDE.md は Claude Code にプロジェクト固有のコンテキストや指示を与えるファイルです。コーディング規約、アーキテクチャの説明、頻出コマンドなどを記述します。\n\nClaude はセッション開始時にこのファイルを自動的に読み込み、指示に従って動作します。",
          "code": [],
          "callouts": [
            {
              "type": "info",
              "text": "CLAUDE.md はプロジェクトのルートに配置します。Git で管理することでチーム全体で共有できます。"
            }
          ],
          "tags": [
            "必須",
            "初心者向け",
            "チーム向け"
          ]
        },
        {
          "id": "claude-md-init",
          "title": "CLAUDE.md の生成方法",
          "description": "対話的にまたは手動で CLAUDE.md を作成する",
          "content": "CLAUDE.md を作成する方法はいくつかあります。プロジェクトの状況に応じて選択してください。",
          "code": [
            {
              "lang": "bash",
              "label": "/init コマンドで自動生成",
              "value": "claude\n# セッション内で:\n> /init",
              "recommended": true
            },
            {
              "lang": "bash",
              "label": "手動で作成",
              "value": "# プロジェクトルートに CLAUDE.md を作成\ntouch CLAUDE.md\n\n# エディタで開いて編集\ncode CLAUDE.md  # VS Code の場合"
            },
            {
              "lang": "bash",
              "label": "Claude Code に依頼して生成",
              "value": "claude\n# セッション内で:\n> このプロジェクトを分析して CLAUDE.md を作成してください"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "/init は何度でも実行できます。既存の CLAUDE.md を上書きする前に確認されます。初回は /init での自動生成がおすすめです。"
            }
          ],
          "tags": [
            "必須",
            "初心者向け"
          ]
        },
        {
          "id": "claude-md-writing",
          "title": "効果的な書き方",
          "description": "CLAUDE.md のベストプラクティス",
          "content": "効果的な CLAUDE.md を書くポイント:\n\n- 簡潔に書く: 長すぎる指示は効果が下がります\n- 具体的に書く: 「コードをきれいに」ではなく「ESLint ルールに従う」\n- コマンドを明記: ビルド、テスト、リントのコマンドを書く\n- 技術スタックを明記: 使用フレームワーク、言語バージョンなど",
          "code": [
            {
              "lang": "markdown",
              "label": "CLAUDE.md の例",
              "value": "# CLAUDE.md\n\n## プロジェクト概要\nReact + TypeScript のWebアプリ。Vite でビルド。\n\n## コマンド\n- `pnpm run dev` — 開発サーバー\n- `pnpm run test` — テスト実行\n- `pnpm run lint` — リント\n\n## コーディング規約\n- 関数コンポーネントのみ使用\n- CSS Modules を使用\n- テストは Vitest で記述"
            }
          ],
          "callouts": [
            {
              "type": "warning",
              "text": "機密情報（API キー、パスワード等）を CLAUDE.md に含めないでください。Git で共有される可能性があります。"
            }
          ],
          "tags": [
            "必須",
            "中級者向け",
            "チーム向け"
          ]
        },
        {
          "id": "claude-md-hierarchy",
          "title": "階層構造",
          "description": "ディレクトリごとの CLAUDE.md",
          "content": "CLAUDE.md は複数の階層に配置できます。Claude はプロジェクトルートから作業ディレクトリまでの全ての CLAUDE.md をマージして読み込みます。\n\n優先順位: ユーザー設定 (~/.claude/CLAUDE.md) < プロジェクトルート (CLAUDE.md) < サブディレクトリ (src/CLAUDE.md)",
          "code": [
            {
              "lang": "bash",
              "label": "階層構造の例",
              "value": "project/\n├── CLAUDE.md              # プロジェクト全体の指示\n├── src/\n│   └── CLAUDE.md          # src 以下に特化した指示\n└── tests/\n    └── CLAUDE.md          # テストに特化した指示"
            }
          ],
          "callouts": [],
          "tags": [
            "中級者向け",
            "チーム向け"
          ]
        },
        {
          "id": "claude-md-rules",
          "title": ".claude/rules/ ディレクトリ",
          "description": "条件付きルールファイル",
          "content": ".claude/rules/ ディレクトリにルールファイルを配置すると、ファイルパスのグロブパターンに基づいて条件付きでルールが適用されます。\n\n例えば、TypeScript ファイル編集時のみ適用されるルールや、テストファイル用のルールを分離できます。",
          "code": [
            {
              "lang": "bash",
              "label": "ルールディレクトリの構造",
              "value": ".claude/\n└── rules/\n    ├── typescript.md      # *.ts, *.tsx に適用\n    ├── testing.md         # *.test.*, *.spec.* に適用\n    └── docs.md            # *.md に適用"
            }
          ],
          "callouts": [
            {
              "type": "info",
              "text": "ルールファイル内の YAML フロントマターで適用条件（globs）を指定します。"
            }
          ],
          "tags": [
            "上級者向け",
            "チーム向け"
          ]
        }
      ]
    },
    {
      "id": "first-steps",
      "name": "まずは使ってみる",
      "description": "実際に動かして感覚をつかもう",
      "steps": [
        {
          "id": "try-analysis",
          "title": "最初のタスクを試してみる",
          "description": "Claude Code の基本操作を体験する",
          "content": "インストールと CLAUDE.md の設定が終わったら、実際に Claude Code を動かしてみましょう。プロジェクトのディレクトリで `claude` を起動して、日本語で話しかけるだけです。\n\n特別な構文は必要ありません。「このファイルを修正して」「バグを直して」「テストを追加して」など、自然な言葉で依頼できます。",
          "code": [
            {
              "lang": "bash",
              "label": "まずプロジェクトを分析させてみよう",
              "value": "cd your-project\nclaude\n\n# セッション内で話しかけてみましょう:\n> このプロジェクトの構造を説明して\n> package.json を見て、使っている技術スタックを教えて\n> README.md を日本語で書き直して",
              "recommended": true
            },
            {
              "lang": "bash",
              "label": "コードを書かせてみよう",
              "value": "> utils/format.ts に日付フォーマット関数を追加して\n> この関数のユニットテストを書いて\n> src/Button.tsx をアクセシビリティ対応にして"
            },
            {
              "lang": "bash",
              "label": "バグを直させてみよう",
              "value": "# エラーメッセージをそのまま貼り付けてOK\n> TypeError: Cannot read properties of undefined (reading 'map')\n> users.map(u => u.name) でエラーが出ています。直してください"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "失敗を恐れずに何でも試してみましょう。Claude は変更前に確認を求めるので安心です。/undo で最後の操作を元に戻せます。"
            }
          ],
          "tags": [
            "必須",
            "初心者向け"
          ]
        },
        {
          "id": "try-workflow",
          "title": "典型的な開発フロー",
          "description": "日常の開発タスクでの使い方パターン",
          "content": "Claude Code は「依頼 → 確認 → 次の依頼」のサイクルで使います。一度に全てを依頼するより、段階的に進めるのがコツです。\n\n以下のように、自然な会話の流れで作業を進められます。",
          "code": [
            {
              "lang": "bash",
              "label": "バグ修正の流れ",
              "value": "# Step 1: エラーを貼り付けて原因を調べる\n> TypeError: Cannot read properties of undefined\n> この行で起きています: users.map(u => u.name)\n\n# Step 2: 修正を依頼\n> 原因がわかりました。users が undefined の場合を処理して\n\n# Step 3: テストも追加\n> この修正のテストケースも書いて"
            },
            {
              "lang": "bash",
              "label": "新機能追加の流れ",
              "value": "# Step 1: 既存コードを理解させる\n> src/api/users.ts の構造を説明して\n\n# Step 2: 同じパターンで機能を追加\n> 同じパターンで、ユーザー検索 API を追加して\n\n# Step 3: 確認してコミット\n> 変更内容を確認して、コミットメッセージを提案して"
            }
          ],
          "callouts": [
            {
              "type": "info",
              "text": "フックや MCP を設定しなくても、この段階で十分に使えます。まずは日常の開発に取り入れてみてください。フックと MCP は後から追加できます。"
            }
          ],
          "tags": [
            "初心者向け",
            "中級者向け"
          ]
        }
      ]
    },
    {
      "id": "skills",
      "name": "スキル設定",
      "description": "カスタムスラッシュコマンドでワークフローを自動化",
      "steps": [
        {
          "id": "skills-overview",
          "title": "スキルの概要",
          "description": "SKILL.md を配置するだけでカスタムコマンドを追加",
          "content": "スキルは Claude Code に独自のスラッシュコマンドを追加する機能です。.claude/skills/<スキル名>/SKILL.md にファイルを配置するだけで、セッション内で /スキル名 として呼び出せます。\n\nプロジェクト固有のスキルは .claude/skills/ に、全プロジェクトで使いたいスキルは ~/.claude/skills/ に配置します。",
          "code": [
            {
              "lang": "text",
              "label": "スキルのディレクトリ構成",
              "value": ".claude/skills/<スキル名>/SKILL.md  # プロジェクト固有\n~/.claude/skills/<スキル名>/SKILL.md  # ユーザーグローバル"
            }
          ],
          "callouts": [
            {
              "type": "info",
              "text": "スキル・MCP・フックの詳細設定は「カスタマイズガイド」(/customization) で解説しています。"
            }
          ],
          "tags": [
            "上級者向け"
          ]
        },
        {
          "id": "skills-create",
          "title": "SKILL.md の基本構成",
          "description": "YAML フロントマター + Markdown 本文でスキルを定義",
          "content": "スキルは YAML フロントマターと Markdown 本文の 2 部構成です。name と description を記述し、本文に Claude への指示を書きます。",
          "code": [
            {
              "lang": "markdown",
              "label": ".claude/skills/review/SKILL.md",
              "value": "---\nname: review\ndescription: コードレビューを実行する\n---\n\ngit diff の内容を確認し、コーディング規約・セキュリティ・テストを評価してください。",
              "recommended": true
            }
          ],
          "callouts": [],
          "tags": [
            "上級者向け",
            "チーム向け"
          ]
        }
      ]
    },
    {
      "id": "mcp",
      "name": "MCP サーバー設定",
      "description": "Model Context Protocol でツールを拡張",
      "steps": [
        {
          "id": "mcp-overview",
          "title": "MCP の概要",
          "description": "GitHub / DB / ブラウザ等を自然言語で操作",
          "content": "MCP (Model Context Protocol) は Claude Code に外部ツールやデータソースを接続するための標準プロトコルです。GitHub、データベース、ブラウザなどを自然言語で操作できるようになります。\n\nMCP サーバーの詳細な設定方法・スコープ・認証・エンタープライズ管理については「カスタマイズガイド」を参照してください。",
          "code": [
            {
              "lang": "bash",
              "label": "MCP サーバーの基本的な追加",
              "value": "# stdio トランスポート（ローカル実行）\nclaude mcp add my-server -s project -- npx @example/mcp-server\n\n# HTTP トランスポート（リモートサーバー）\nclaude mcp add my-remote -s project --transport http --url https://mcp.example.com",
              "recommended": true
            }
          ],
          "callouts": [
            {
              "type": "info",
              "text": "スコープ・トランスポート・OAuth 認証・.mcp.json の詳細は「カスタマイズガイド」(/customization) で解説しています。"
            }
          ],
          "tags": [
            "上級者向け"
          ]
        },
        {
          "id": "mcp-manage",
          "title": "MCP サーバーの管理",
          "description": "list / remove / reset で管理",
          "content": "登録済み MCP サーバーの確認・削除は以下のコマンドで行います。",
          "code": [
            {
              "lang": "bash",
              "label": "管理コマンド",
              "value": "claude mcp list            # 一覧表示\nclaude mcp get <name>      # 詳細確認\nclaude mcp remove <name>   # 削除"
            }
          ],
          "callouts": [],
          "tags": [
            "上級者向け"
          ]
        }
      ]
    },
    {
      "id": "hooks",
      "name": "フック設定",
      "description": "Claude Code のライフサイクルイベントにカスタムスクリプトを接続",
      "steps": [
        {
          "id": "hooks-overview",
          "title": "フックの概要",
          "description": "ツール実行前後にカスタム処理を自動実行",
          "content": "フックは Claude Code のライフサイクルイベントにカスタムシェルコマンドを接続する機能です。\n\n主な活用場面:\n- ファイル保存のたびに prettier / ESLint を自動実行\n- 危険なコマンドを実行前にブロック\n- タスク完了時に OS 通知を送る\n\n14 種のイベント・3 タイプ（command / prompt / agent）の詳細は「カスタマイズガイド」を参照してください。",
          "code": [
            {
              "lang": "json",
              "label": ".claude/settings.json の基本構造",
              "value": "{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [{ \"type\": \"command\", \"command\": \"npx prettier --write $CLAUDE_FILE_PATH\" }]\n      }\n    ]\n  }\n}",
              "recommended": true
            }
          ],
          "callouts": [
            {
              "type": "info",
              "text": "フックの全イベント・終了コード制御・非同期実行・ベストプラクティスは「カスタマイズガイド」(/customization) で解説しています。"
            }
          ],
          "tags": [
            "上級者向け"
          ]
        },
        {
          "id": "hooks-definition",
          "title": "フックの基本設定",
          "description": "settings.json でイベント・マッチャー・コマンドを定義",
          "content": "フックは .claude/settings.json の hooks プロパティで定義します。exit 0 で許可、exit 2 でブロックしてフィードバックを返します。",
          "code": [
            {
              "lang": "bash",
              "label": "rm -rf をブロックする PreToolUse フック",
              "value": "# hooks スクリプト例\nINPUT=$(cat)  # stdin から JSON を受信\nCMD=$(echo \"$INPUT\" | jq -r '.tool_input.command // \"\"')\nif echo \"$CMD\" | grep -q 'rm -rf'; then\n  echo 'rm -rf は禁止されています' >&2\n  exit 2  # ブロック\nfi\nexit 0  # 許可"
            }
          ],
          "callouts": [
            {
              "type": "warning",
              "text": "フックコマンドはシェルで実行されます。信頼できるコマンドのみ設定してください。"
            }
          ],
          "tags": [
            "上級者向け"
          ]
        }
      ]
    },
    {
      "id": "ide",
      "name": "IDE 連携",
      "description": "エディタとの統合設定",
      "steps": [
        {
          "id": "ide-vscode",
          "title": "VS Code 拡張",
          "description": "VS Code との統合",
          "content": "VS Code 向けの Claude Code 拡張を使うと、エディタ内で直接 Claude Code を操作できます。ターミナルパネルに統合され、コンテキストの共有がシームレスになります。",
          "code": [
            {
              "lang": "bash",
              "label": "VS Code 拡張のインストール",
              "value": "# VS Code のマーケットプレイスから\n# 「Claude Code」で検索してインストール\n\n# または CLI から\ncode --install-extension anthropic.claude-code"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "VS Code の場合、ターミナルから直接 claude コマンドを実行しても同様に使えます。"
            }
          ],
          "tags": [
            "初心者向け"
          ]
        },
        {
          "id": "ide-jetbrains",
          "title": "JetBrains 拡張",
          "description": "IntelliJ / WebStorm 等との統合",
          "content": "JetBrains IDE（IntelliJ IDEA、WebStorm、PyCharm 等）用のプラグインが提供されています。IDE のターミナルから Claude Code を起動すると、プロジェクトコンテキストが自動的に認識されます。",
          "code": [
            {
              "lang": "bash",
              "label": "JetBrains プラグインの設定",
              "value": "# JetBrains Marketplace から\n# 「Claude Code」で検索してインストール\n\n# プラグイン設定でパスを確認\n# Settings > Tools > Claude Code"
            }
          ],
          "callouts": [],
          "tags": [
            "初心者向け"
          ]
        },
        {
          "id": "ide-vim",
          "title": "Vim / Neovim",
          "description": "ターミナルベースのエディタ連携",
          "content": "Vim / Neovim ユーザーは、ターミナルを分割して Claude Code を並行して使うワークフローが推奨です。tmux や WezTerm のペイン分割が便利です。",
          "code": [
            {
              "lang": "bash",
              "label": "tmux でペイン分割",
              "value": "# tmux で水平分割して Claude Code を起動\ntmux split-window -h 'claude'\n\n# または Neovim のターミナルから\n:terminal claude"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "Claude Code はターミナルネイティブなので、どのエディタとも組み合わせて使えます。"
            }
          ],
          "tags": [
            "中級者向け"
          ]
        }
      ]
    },
    {
      "id": "permissions",
      "name": "権限管理",
      "description": "ツールの実行権限を制御する",
      "steps": [
        {
          "id": "permissions-model",
          "title": "権限モデルの理解",
          "description": "Claude Code の権限システム",
          "content": "Claude Code は安全性のために、ファイル編集やシェルコマンド実行などに対する権限管理機能を備えています。\n\n3 つのモードがあります:\n- plan モード: 計画の承認が必要\n- default モード: 書き込み操作に承認が必要\n- bypassPermissions モード: すべてのツールを自動承認（CI/CD 向け）",
          "code": [],
          "callouts": [
            {
              "type": "warning",
              "text": "bypassPermissions モードは信頼できる環境（CI/CD パイプライン等）でのみ使用してください。"
            }
          ],
          "tags": [
            "必須",
            "初心者向け"
          ]
        },
        {
          "id": "permissions-settings",
          "title": "settings.json での設定",
          "description": "細かい権限のカスタマイズ",
          "content": "`.claude/settings.json` で特定のツールやコマンドの自動承認リストを設定できます。頻繁に使うコマンドを登録しておくと、作業効率が向上します。",
          "code": [
            {
              "lang": "json",
              "label": ".claude/settings.json の例",
              "value": "{\n  \"permissions\": {\n    \"allow\": [\n      \"Bash(npm run test*)\",\n      \"Bash(npm run lint*)\",\n      \"Bash(git status)\",\n      \"Bash(git diff*)\",\n      \"Read\",\n      \"Glob\",\n      \"Grep\"\n    ],\n    \"deny\": [\n      \"Bash(rm -rf*)\",\n      \"Bash(git push --force*)\"\n    ]\n  }\n}"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "ワイルドカード（*）を使って、パターンマッチングで権限を設定できます。"
            }
          ],
          "tags": [
            "中級者向け",
            "チーム向け"
          ]
        },
        {
          "id": "permissions-ci",
          "title": "CI/CD 用の設定",
          "description": "自動化パイプラインでの権限設定",
          "content": "CI/CD パイプラインでは、対話的な承認ができないため、適切な権限設定が必要です。`--dangerously-skip-permissions` フラグまたは環境変数で設定します。",
          "code": [
            {
              "lang": "bash",
              "label": "CI/CD での実行例",
              "value": "# 非対話モードで実行\nclaude -p \"テストを実行して結果を報告\" --dangerously-skip-permissions\n\n# 環境変数での設定\nexport CLAUDE_CODE_SKIP_PERMISSIONS=true\nclaude -p \"コードレビューを実行\""
            }
          ],
          "callouts": [
            {
              "type": "important",
              "text": "CI/CD での権限スキップは、コンテナやサンドボックス環境内で使用してください。"
            }
          ],
          "tags": [
            "CI/CD",
            "上級者向け"
          ]
        }
      ]
    },
    {
      "id": "tips",
      "name": "Tips & Tricks",
      "description": "Claude Code を最大限に活用するコツ",
      "steps": [
        {
          "id": "tips-context",
          "title": "コンテキスト管理",
          "description": "効果的なコンテキストの使い方",
          "content": "Claude Code のパフォーマンスは、与えるコンテキストの質に大きく依存します。\n\n- プロジェクトルートから起動する: 関連ファイルが自動的に認識されます\n- CLAUDE.md でプロジェクト情報を提供する\n- `/compact` でコンテキストを圧縮して、長いセッションでも精度を維持する\n- 新しいタスクには `/clear` でリフレッシュする",
          "code": [
            {
              "lang": "bash",
              "label": "コンテキスト管理コマンド",
              "value": "# コンテキストの圧縮\n> /compact\n\n# セッションのクリア\n> /clear\n\n# コンテキストの使用量を確認\n> /cost"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "コンテキストウィンドウの使用量が多くなったら /compact を実行すると、コストと精度のバランスが改善されます。"
            }
          ],
          "tags": [
            "初心者向け",
            "中級者向け"
          ]
        },
        {
          "id": "tips-prompting",
          "title": "効果的なプロンプト",
          "description": "より良い結果を得るためのプロンプト技法",
          "content": "Claude Code に効果的に指示を出すためのポイント:\n\n- 具体的な結果を述べる: 「ログイン機能を追加して」→「JWT 認証によるログインエンドポイントを追加して」\n- ステップバイステップで依頼する: 大きなタスクは分割して依頼する\n- 参照ファイルを示す: 「auth.ts のパターンに従って」など既存コードを参照させる\n- 制約を明示する: 「既存のテストを壊さないで」など制約を伝える",
          "code": [],
          "callouts": [
            {
              "type": "tip",
              "text": "画像やスクリーンショットも入力として渡せます。UI の修正依頼に便利です。"
            }
          ],
          "tags": [
            "初心者向け",
            "中級者向け"
          ]
        },
        {
          "id": "tips-models",
          "title": "モデルの使い分け",
          "description": "タスクに応じたモデル選択",
          "content": "Claude Code では複数のモデルが利用できます。タスクの複雑さに応じて使い分けましょう。\n\n- Opus: 複雑なアーキテクチャ設計、大規模リファクタリングに最適\n- Sonnet: 日常的なコーディング、バグ修正に最適（デフォルト）\n- Haiku: 簡単な質問、コード読解に最適（高速・低コスト）",
          "code": [
            {
              "lang": "bash",
              "label": "モデルの切り替え",
              "value": "# セッション内でモデルを切り替え\n> /model\n\n# 起動時にモデルを指定\nclaude --model opus"
            }
          ],
          "callouts": [],
          "tags": [
            "中級者向け"
          ]
        },
        {
          "id": "tips-non-interactive",
          "title": "非対話モード",
          "description": "スクリプトやパイプラインでの活用",
          "content": "Claude Code は非対話モードで使用することもできます。`-p` フラグでプロンプトを直接渡し、結果を標準出力に出力します。\n\nシェルスクリプトや CI/CD パイプラインに組み込んで活用できます。",
          "code": [
            {
              "lang": "bash",
              "label": "非対話モードの使用",
              "value": "# プロンプトを直接渡す\nclaude -p \"このリポジトリの構造を説明して\"\n\n# パイプで入力を渡す\ncat error.log | claude -p \"このエラーの原因と修正方法を教えて\"\n\n# JSON 出力\nclaude -p \"package.json の依存関係をリストアップ\" --output-format json"
            }
          ],
          "callouts": [
            {
              "type": "info",
              "text": "--output-format json を使うと、プログラムで処理しやすい形式で出力されます。"
            }
          ],
          "tags": [
            "CI/CD",
            "上級者向け"
          ]
        },
        {
          "id": "tips-custom-commands",
          "title": "カスタムスラッシュコマンド",
          "description": "独自のスラッシュコマンドを定義",
          "content": "`.claude/commands/` ディレクトリに Markdown ファイルを配置すると、カスタムスラッシュコマンドとして使えます。\n\nチーム共通のワークフロー（コードレビュー、デプロイ手順など）をコマンド化できます。",
          "code": [
            {
              "lang": "markdown",
              "label": ".claude/commands/review.md",
              "value": "---\ndescription: コードレビューを実行\n---\n\n以下の手順でコードレビューを行ってください:\n\n1. git diff で変更を確認\n2. コーディング規約への準拠を確認\n3. セキュリティ上の問題がないか確認\n4. テストが十分か確認\n5. 改善提案をリストアップ"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "$ARGUMENTS プレースホルダーを使うと、コマンド実行時に引数を渡せます。"
            }
          ],
          "tags": [
            "チーム向け",
            "上級者向け"
          ]
        }
      ]
    },
    {
      "id": "troubleshooting",
      "name": "トラブルシューティング",
      "description": "よくある問題と解決方法",
      "steps": [
        {
          "id": "ts-doctor",
          "title": "/doctor コマンド",
          "description": "環境の自動診断",
          "content": "問題が発生した場合、まず `/doctor` コマンドで環境を診断しましょう。Node.js バージョン、認証状態、MCP サーバーの接続状況などを自動チェックします。",
          "code": [
            {
              "lang": "bash",
              "label": "環境診断の実行",
              "value": "claude\n> /doctor"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "/doctor は最初に試すべきトラブルシューティングツールです。"
            }
          ],
          "tags": [
            "初心者向け"
          ]
        },
        {
          "id": "ts-auth",
          "title": "認証の問題",
          "description": "認証エラーの対処",
          "content": "認証に関する一般的な問題と解決策:\n\n- トークンの期限切れ: `claude auth logout` → `claude auth login` で再認証\n- API キーの無効化: 新しいキーを console.anthropic.com で発行\n- ネットワーク制限: プロキシ設定を確認",
          "code": [
            {
              "lang": "bash",
              "label": "認証の再設定",
              "value": "# 現在の認証状態を確認\nclaude auth status\n\n# ログアウトして再認証\nclaude auth logout\nclaude auth login"
            }
          ],
          "callouts": [
            {
              "type": "warning",
              "text": "API キーが漏洩した可能性がある場合は、直ちに console.anthropic.com で無効化してください。"
            }
          ],
          "tags": [
            "初心者向け"
          ]
        },
        {
          "id": "ts-mcp",
          "title": "MCP サーバーの問題",
          "description": "MCP 接続トラブルの対処",
          "content": "MCP サーバーが正常に動作しない場合の確認ポイント:\n\n- サーバープロセスが起動しているか確認\n- 必要な依存関係がインストールされているか確認\n- 環境変数が正しく設定されているか確認\n- ログ出力を確認",
          "code": [
            {
              "lang": "bash",
              "label": "MCP サーバーのデバッグ",
              "value": "# MCP サーバーの一覧と状態確認\nclaude mcp list\n\n# サーバーの再起動\nclaude mcp reset\n\n# 問題のあるサーバーを削除して再追加\nclaude mcp remove problematic-server\nclaude mcp add problematic-server -- npx @example/server"
            }
          ],
          "callouts": [],
          "tags": [
            "上級者向け"
          ]
        },
        {
          "id": "ts-performance",
          "title": "パフォーマンスの問題",
          "description": "動作が遅い場合の対処",
          "content": "Claude Code の動作が遅い場合のチェックポイント:\n\n- コンテキストが大きすぎないか → `/compact` で圧縮\n- 大きなリポジトリで不要なファイルが読み込まれていないか → .claudeignore で除外\n- ネットワーク遅延 → 接続環境を確認\n- MCP サーバーの応答遅延 → 不要なサーバーを無効化",
          "code": [
            {
              "lang": "bash",
              "label": ".claudeignore の例",
              "value": "# .claudeignore\nnode_modules/\ndist/\nbuild/\n*.log\n.git/\ncoverage/"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": ".claudeignore は .gitignore と同じ構文です。大きなディレクトリを除外すると起動が速くなります。"
            }
          ],
          "tags": [
            "初心者向け"
          ]
        },
        {
          "id": "ts-errors",
          "title": "エラーの対処",
          "description": "一般的なエラーメッセージと解決策",
          "content": "よくあるエラーメッセージとその対処法:\n\n- \"Context window full\": /compact または /clear を実行\n- \"Rate limit exceeded\": しばらく待ってからリトライ\n- \"Tool execution failed\": 権限設定を確認\n- \"Network error\": インターネット接続を確認",
          "code": [
            {
              "lang": "bash",
              "label": "一般的なリカバリー手順",
              "value": "# Claude Code の更新\nnpm update -g @anthropic-ai/claude-code\n\n# キャッシュのクリア\nclaude config reset\n\n# デバッグモードで起動\nclaude --debug"
            }
          ],
          "callouts": [
            {
              "type": "info",
              "text": "解決しない場合は github.com/anthropics/claude-code/issues で Issue を報告してください。"
            }
          ],
          "tags": [
            "初心者向け"
          ]
        }
      ]
    },
    {
      "id": "best-practices",
      "name": "ベストプラクティス",
      "description": "Claude Code を最大限に活用するための推奨事項",
      "steps": [
        {
          "id": "bp-team",
          "title": "チーム開発での活用",
          "description": "チームで Claude Code を使うためのガイドライン",
          "content": "チームで Claude Code を効果的に使うためのポイント:\n\n- CLAUDE.md をリポジトリにコミットしてチーム全体で共有する\n- settings.json でプロジェクト共通の権限設定を定義する\n- カスタムコマンドでチームのワークフローを標準化する\n- .claudeignore で不要なファイルの読み込みを防ぐ",
          "code": [
            {
              "lang": "bash",
              "label": "チーム向けセットアップ手順",
              "value": "# 1. CLAUDE.md を作成\nclaude\n> /init\n\n# 2. 設定ファイルをコミット\ngit add CLAUDE.md .claude/settings.json .claudeignore\ngit commit -m \"Add Claude Code configuration\""
            }
          ],
          "callouts": [
            {
              "type": "important",
              "text": "CLAUDE.md と .claude/settings.json はリポジトリにコミットし、.claude/settings.local.json は .gitignore に追加してください。"
            }
          ],
          "tags": [
            "中級者向け",
            "チーム向け"
          ]
        },
        {
          "id": "bp-security",
          "title": "セキュリティ",
          "description": "安全に Claude Code を使うための注意点",
          "content": "セキュリティを維持するためのベストプラクティス:\n\n- API キーを CLAUDE.md や settings.json に含めない\n- 権限設定で危険なコマンド（rm -rf、git push --force など）を deny リストに追加する\n- CI/CD ではサンドボックス環境内で実行する\n- 定期的に API キーをローテーションする",
          "code": [
            {
              "lang": "bash",
              "label": ".gitignore に追加すべきファイル",
              "value": "# .gitignore\n.claude/settings.local.json\n.claude/credentials.json\n.env\n.env.local"
            }
          ],
          "callouts": [
            {
              "type": "warning",
              "text": "生成されたコードは必ずレビューしてからコミットしてください。セキュリティ脆弱性が含まれる可能性があります。"
            }
          ],
          "tags": [
            "チーム向け",
            "CI/CD"
          ]
        },
        {
          "id": "bp-cost",
          "title": "コスト最適化",
          "description": "API 利用コストを抑えるための工夫",
          "content": "API プランを使用している場合のコスト最適化:\n\n- /compact を定期的に使ってトークン使用量を抑える\n- 簡単なタスクには Haiku モデルを使う\n- .claudeignore で不要なファイルの読み込みを減らす\n- 大きなファイルの全文読み込みを避ける（行範囲を指定する）",
          "code": [
            {
              "lang": "bash",
              "label": "コスト確認",
              "value": "# セッション中のコスト確認\n> /cost\n\n# 軽量モデルの使用\n> /model haiku"
            }
          ],
          "callouts": [
            {
              "type": "tip",
              "text": "Max プランなら定額なので、コストを気にせず活用できます。"
            }
          ],
          "tags": [
            "中級者向け"
          ]
        },
        {
          "id": "bp-cicd",
          "title": "CI/CD 統合",
          "description": "GitHub Actions 等への組み込み",
          "content": "Claude Code を CI/CD パイプラインに統合することで、コードレビュー、テスト生成、ドキュメント更新などを自動化できます。",
          "code": [
            {
              "lang": "yaml",
              "label": "GitHub Actions の例",
              "value": "name: Claude Code Review\non: [pull_request]\njobs:\n  review:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n      - run: npm install -g @anthropic-ai/claude-code\n      - run: |\n          claude -p \"PR の変更をレビューして改善点を指摘して\" \\\n            --dangerously-skip-permissions\n        env:\n          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}"
            }
          ],
          "callouts": [
            {
              "type": "important",
              "text": "API キーは GitHub Secrets に保存し、ワークフローファイルに直接記述しないでください。"
            }
          ],
          "tags": [
            "CI/CD",
            "チーム向け"
          ]
        }
      ]
    }
  ]
}
