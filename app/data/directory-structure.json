{
  "sections": [
    {
      "id": "global",
      "name": "グローバル設定",
      "basePath": "~/.claude/",
      "description": "ユーザー全体に適用される設定。全プロジェクトで共通して使う設定やカスタマイズをここに配置する。",
      "entries": [
        {
          "path": "settings.json",
          "type": "file",
          "name": "グローバル設定",
          "description": "ユーザー全体の権限・ツール許可・フック設定",
          "detail": "全プロジェクトに適用される基本設定ファイル。permissions.allow / permissions.deny でツールの許可・拒否パターンを定義する。フック設定もここに記述可能で、PreToolUse / PostToolUse / Notification などのイベントに対してシェルスクリプトを実行させることができる。\n\nプロジェクト設定（.claude/settings.json）との関係では、deny → ask → allow の順で全階層の設定がマージされて評価される。ここで allow したツールでも、プロジェクト側で deny されていればブロックされる。",
          "usage": "permissions.deny に \"Bash(rm -rf *)\" のようなパターンを追加すると、全プロジェクトで危険なコマンドをブロックできる。プロジェクト固有でない個人的な設定（デフォルトのフック、常に許可するツールなど）はここに集約するのがおすすめ。",
          "vcs": false,
          "recommended": "recommended"
        },
        {
          "path": "settings.local.json",
          "type": "file",
          "name": "ローカル専用設定",
          "description": "同期しないローカル専用設定",
          "detail": "settings.json と同じ JSON 形式だが、このマシンにのみ適用される設定。クラウド同期やバックアップの対象外にしたい設定に使う。settings.json と settings.local.json の両方が存在する場合、両方の設定がマージされて適用される。",
          "usage": "会社の Mac と個人の Mac で異なるフック設定を使いたい場合や、特定のマシンでだけ有効にしたいツール許可がある場合に便利。",
          "vcs": false,
          "recommended": "optional"
        },
        {
          "path": "CLAUDE.md",
          "type": "file",
          "name": "グローバル指示ファイル",
          "description": "全プロジェクト共通の指示（メモリファイル）",
          "detail": "すべてのプロジェクトで Claude が自動的に読み込む指示ファイル。個人的なコーディングスタイルの好みや、常に適用したいルールを記載する。Claude はこのファイルの内容をシステムプロンプトの一部として毎回読み込むため、短く具体的に書くのが効果的。\n\nこのファイルが大きくなりすぎるとコンテキストウィンドウを圧迫する。目安として 200 行以内に収め、それ以上になったら rules/ ディレクトリでモジュラー化するのが推奨。@path/to/file 記法で他のファイルをインポートすることも可能（再帰5段階まで）。",
          "usage": "記載例：「コミットメッセージは日本語で書く」「変数名はキャメルケースを使う」「console.log ではなく構造化ロギングを使う」など。",
          "vcs": false,
          "recommended": "recommended"
        },
        {
          "path": "commands/",
          "type": "directory",
          "name": "グローバルスラッシュコマンド",
          "description": "全プロジェクトで使えるカスタムスラッシュコマンド",
          "detail": "このディレクトリに .md ファイルを配置すると、どのプロジェクトでも /user:<command-name> で呼び出せるカスタムコマンドになる。ファイル名がそのままコマンド名になる（例: review.md → /user:review）。Markdown ファイルの中身がそのままプロンプトとして Claude に送信される。$ARGUMENTS プレースホルダーを使うと、コマンド呼び出し時の引数を埋め込める。サブディレクトリも可能で、commands/db/migrate.md なら /user:db:migrate で呼び出せる。",
          "usage": "コードレビュー用プロンプト、リファクタリング手順、テスト生成テンプレートなど、繰り返し使うワークフローをコマンド化する。例: /user:review src/app.tsx",
          "vcs": false,
          "recommended": "optional"
        },
        {
          "path": "agents/",
          "type": "directory",
          "name": "グローバルカスタムエージェント",
          "description": "ユーザーレベルのカスタムサブエージェント",
          "detail": "独立したコンテキストウィンドウで動く特化型 AI エージェントを定義するディレクトリ。各エージェントは .md ファイルで定義し、YAML フロントマターでツール制限や権限モードを設定できる。\n\n設定可能なフロントマター: allowed_tools（使えるツールのリスト）、mode（plan / bypassPermissions / default 等）、model（使用モデル指定）。Claude が Task ツールを使うとき、ここに定義されたエージェントが subagent_type の選択肢として自動的に表示される。",
          "usage": "「Read と Grep だけ使える読み取り専用リサーチャー」や「Bash も使える自動テストランナー」といった特化型エージェントを作れる。全プロジェクトで共通して使いたい汎用エージェント（コードレビュアー、ドキュメント生成者など）をここに配置する。",
          "vcs": false,
          "recommended": "advanced"
        },
        {
          "path": "skills/<skill-name>/SKILL.md",
          "type": "file",
          "name": "グローバルスキル",
          "description": "ユーザーレベルの再利用可能なスキル",
          "detail": "SKILL.md と補助ファイルで構成される再利用可能なプロンプト・ワークフロー。スラッシュコマンドとは異なり、スキルは独自のコンテキスト設定と補助リソースを持てる。SKILL.md の YAML フロントマターで context: fork を指定すると、サブエージェントとして独立したコンテキストで実行される（メインの会話を汚さない）。補助ファイル（テンプレート、設定ファイル等）を同じディレクトリに配置して参照できる。",
          "usage": "単純なプロンプトならコマンド（commands/）、複数ファイルを伴う複雑なワークフローならスキル（skills/）を使う。",
          "vcs": false,
          "recommended": "advanced"
        },
        {
          "path": "rules/",
          "type": "directory",
          "name": "グローバルルール",
          "description": "全プロジェクト共通のルール（トピック別 .md ファイル）",
          "detail": "CLAUDE.md を分割してモジュラー管理するためのディレクトリ。Claude はこのディレクトリ内のすべての .md ファイルを自動的に読み込む。CLAUDE.md が肥大化したときの分割先として使うのが主なユースケース。サブディレクトリでの整理も可能。\n\npaths フロントマターを使うとファイルパス条件付きルールも定義でき、「*.test.ts ファイルを編集するときだけ適用されるテストルール」のような使い方ができる。",
          "usage": "1ファイル1トピック（例: coding-style.md, git-workflow.md, naming-conventions.md）で管理し、全プロジェクトに適用する。",
          "vcs": false,
          "recommended": "optional"
        },
        {
          "path": "plans/",
          "type": "directory",
          "name": "プランファイル",
          "description": "プランファイルのデフォルト保存場所",
          "detail": "Claude が plan モード（EnterPlanMode）で作成したプランが保存されるデフォルトの場所。プランファイルは Markdown 形式で、実装手順やファイル変更の概要が記録される。保存されたプランは後から参照でき、長期的なタスクの進捗管理にも使える。自動的に作成・管理されるため、手動で触る必要はほとんどない。",
          "usage": "settings.json の plansDirectory 設定でこの保存先を変更できる。プロジェクトごとに別のディレクトリを指定したい場合は、プロジェクトの settings.json で上書きする。",
          "vcs": false,
          "recommended": "optional"
        },
        {
          "path": "agent-memory/<agent-name>/",
          "type": "directory",
          "name": "エージェントメモリ（user スコープ）",
          "description": "エージェントの永続メモリ（全プロジェクト共通）",
          "detail": "エージェントが会話をまたいで記憶を保持するためのディレクトリ。user スコープのため全プロジェクトで共有される。エージェント定義で memory: user と指定したエージェントが、ここに MEMORY.md などのファイルを書き込む。エージェントは過去の失敗や学習したパターンをここに記録し、次回の会話で参照する。これにより、同じ間違いを繰り返さずに改善していく振る舞いが可能になる。",
          "usage": "ディレクトリ名はエージェント名に対応する（例: code-reviewer エージェントなら agent-memory/code-reviewer/）。手動で編集することも可能だが、基本的にはエージェントが自動管理する。",
          "vcs": false,
          "recommended": "optional"
        },
        {
          "path": "keybindings.json",
          "type": "file",
          "name": "キーバインド設定",
          "description": "Claude Code のキーバインド設定",
          "detail": "Claude Code CLI のショートカットキーをカスタマイズするための設定ファイル。デフォルトのキーバインドを上書きしたり、新しいキーバインドを追加できる。JSON 形式で、各エントリは key（キーの組み合わせ）、command（実行するコマンド）、when（条件）で構成される。Chord バインディング（2段階キー入力）にも対応しており、例えば Ctrl+K → Ctrl+C のような連続入力も設定可能。",
          "usage": "/keybindings-help コマンドで設定のヘルプを確認できる。よく使うカスタマイズ例: 送信キーの変更、新規会話の開始ショートカット、モード切り替えなど。",
          "vcs": false,
          "recommended": "optional"
        }
      ],
      "bestPractices": [
        "個人的なコーディングスタイルの好みは ~/.claude/CLAUDE.md に記載し、プロジェクト固有の指示と分離する",
        "permissions.deny で .env や秘密鍵など機密ファイルへのアクセスをブロックするのが推奨",
        "グローバル CLAUDE.md が大きくなりすぎたら rules/ でモジュラー化する"
      ]
    },
    {
      "id": "project-root",
      "name": "プロジェクトルート",
      "basePath": "<project>/",
      "description": "プロジェクトのルートディレクトリ直下に配置するファイル。チームで共有するものとローカル専用のものがある。",
      "entries": [
        {
          "path": "CLAUDE.md",
          "type": "file",
          "name": "プロジェクト指示ファイル",
          "description": "プロジェクトルートの指示ファイル（チームと共有）",
          "detail": "プロジェクト固有のビルドコマンド、テストコマンド、コーディング規約、アーキテクチャの説明などを記載するファイル。チームメンバー全員が同じ指示を受け取れるよう VCS にコミットする。曖昧な指示（「コードを綺麗に書く」）より、具体的な指示（「関数は30行以内」）のほうが効果的。\n\n@path/to/file 記法でファイルをインポート可能（再帰5段階まで）。これを使うと、既存の CONTRIBUTING.md やコーディング規約ドキュメントを直接参照できる。マークダウン見出し（# コマンド、# アーキテクチャ 等）でセクション分けすると、Claude が構造を理解しやすくなる。.claude/CLAUDE.md にも同名ファイルを置ける。両方存在する場合はどちらも読み込まれる。",
          "usage": "記載例：「pnpm run test で全テスト実行」「API エンドポイントは /api/v2/ プレフィックスを使う」「エラーハンドリングは Result 型パターンを使う」など。",
          "vcs": true,
          "recommended": "recommended"
        },
        {
          "path": "CLAUDE.local.md",
          "type": "file",
          "name": "個人用プロジェクトメモリ",
          "description": "個人用メモリ（gitignore、自動で .gitignore に追加される）",
          "detail": "個人的なメモや、自分だけに適用したい指示を記載するファイル。初回作成時に自動的に .gitignore に追加されるため、チームメンバーには共有されない。/memory コマンドで Claude が自動的にこのファイルに学習内容を記録することもある。プロジェクト固有の個人メモとして活用すると、セッション間で作業状態を維持できる。",
          "usage": "記載例：「自分は TypeScript 初心者なので型の説明を丁寧にしてほしい」「このプロジェクトでは feature/xxx ブランチで作業中」「デバッグ時は console.log を使ってOK」など、個人的なコンテキストや好みを書く。",
          "vcs": false,
          "recommended": "optional"
        },
        {
          "path": ".mcp.json",
          "type": "file",
          "name": "MCP サーバー設定",
          "description": "MCP（Model Context Protocol）サーバーの設定ファイル",
          "detail": "プロジェクトで使用する MCP サーバーの接続情報を定義するファイル。MCP サーバーは Claude に外部ツール（データベース接続、API 呼び出し、ブラウザ操作など）を提供する仕組み。JSON 形式で mcpServers オブジェクトの中にサーバー定義を記述する。各サーバーは command（起動コマンド）、args（引数）、env（環境変数）を設定可能。チームで同じ MCP サーバーを使うために VCS にコミットするのが推奨。\n\nユーザーレベルの MCP 設定は ~/.claude.json に書くが、プロジェクト固有のものはここに定義する。",
          "usage": "認証情報は直接書かず、apiKeyHelper スクリプトで動的に取得するのがベストプラクティス。例: apiKeyHelper: [\"op\", \"read\", \"op://vault/api-key\"] のように 1Password CLI を使う方法がある。",
          "vcs": true,
          "recommended": "optional"
        }
      ],
      "bestPractices": [
        "CLAUDE.md にはよく使うコマンド（ビルド、テスト、リント）を必ず記載して、Claude の繰り返し検索を避ける",
        "具体的に書く：「2スペースインデント使用」のように明確な指示が効果的（「コードを適切にフォーマット」は曖昧）",
        "マークダウン見出しでグループ化し、箇条書きで個別指示を記述すると構造化されて読みやすい",
        "定期的に見直して、プロジェクトの進化に合わせて更新する"
      ]
    },
    {
      "id": "project-claude",
      "name": "プロジェクト設定",
      "basePath": "<project>/.claude/",
      "description": "プロジェクト固有の Claude Code 設定ディレクトリ。チーム共有設定とローカル設定を分けて管理する。",
      "entries": [
        {
          "path": "settings.json",
          "type": "file",
          "name": "プロジェクト共有設定",
          "description": "チームで共有するプロジェクト設定（VCS にコミット）",
          "detail": "プロジェクト全体で統一したい権限設定やフックを定義するファイル。VCS にコミットしてチーム全員に同じルールを適用する。設定の評価順序は deny → ask → allow で、全階層（Managed → Local → Project → User）の設定がマージされる。deny ルールは常に最優先。\n\nここで deny したものは、ユーザー設定で allow されていてもブロックされる。逆に allow したツールでも、ユーザーのグローバル設定で deny されていればブロックされない。",
          "usage": "「このプロジェクトでは本番DBへの直接接続を禁止」のような安全策を定義できる。フック設定も可能で、例えば PreToolUse フックで Bash コマンド実行前にリンターを走らせたり、PostToolUse フックで Write ツール使用後に自動フォーマットをかけるといった自動化ができる。",
          "vcs": true,
          "recommended": "recommended"
        },
        {
          "path": "settings.local.json",
          "type": "file",
          "name": "プロジェクトローカル設定",
          "description": "個人用のプロジェクト設定（自動 gitignore）",
          "detail": "自分だけに適用したいプロジェクト固有の設定ファイル。初回作成時に自動的に .gitignore に追加される。settings.json と同じ JSON 形式で、permissions や hooks を定義できる。設定の優先順位では Local レベル（レベル3）として評価され、Project レベル（レベル4）より優先される。",
          "usage": "個人的に追加で許可したいツール、自分の環境でだけ動かしたいフック、デバッグ用の設定など。チームの設定を壊さずに個人的なカスタマイズができる。",
          "vcs": false,
          "recommended": "optional"
        },
        {
          "path": "CLAUDE.md",
          "type": "file",
          "name": "プロジェクト指示（.claude 内）",
          "description": "プロジェクト固有の指示（.claude/ 内に置くことも可能）",
          "detail": "プロジェクトルートの CLAUDE.md と同等の機能を持つファイル。.claude/ ディレクトリ内に置くことで、プロジェクトルートをすっきり保てる。両方（ルートの CLAUDE.md と .claude/CLAUDE.md）が存在する場合はどちらも読み込まれる。",
          "usage": "チームの目に触れやすくしたいならルート直下、設定ファイル群と一緒に管理したいなら .claude/ 内に配置。ルートの CLAUDE.md と内容を分担させることも可能（例: ルートには概要とコマンド一覧、.claude/CLAUDE.md にはアーキテクチャの詳細説明）。",
          "vcs": true,
          "recommended": "optional"
        },
        {
          "path": "commands/",
          "type": "directory",
          "name": "プロジェクトスラッシュコマンド",
          "description": "プロジェクト固有のカスタムスラッシュコマンド",
          "detail": "このディレクトリに .md ファイルを配置すると /project:<command-name> で呼び出せるカスタムコマンドになる。プロジェクト固有のワークフローをコマンド化してチームで共有するのに最適。$ARGUMENTS プレースホルダーで引数を受け取れる。サブディレクトリで整理も可能（commands/db/seed.md → /project:db:seed）。VCS にコミットすることで、チーム全員が同じコマンドセットを使える。\n\nグローバルコマンド（~/.claude/commands/）との違い: グローバルは /user: プレフィックス、プロジェクトは /project: プレフィックス。同名のコマンドが両方に存在する場合、呼び出し時にプレフィックスで区別する。",
          "usage": "例: deploy.md（/project:deploy でデプロイ手順を実行）、review-checklist.md（/project:review-checklist でレビュー観点を確認）、create-component.md（/project:create-component でコンポーネントの雛形を生成）。",
          "vcs": true,
          "recommended": "recommended"
        },
        {
          "path": "agents/",
          "type": "directory",
          "name": "プロジェクトカスタムエージェント",
          "description": "プロジェクト固有のカスタムサブエージェント",
          "detail": "プロジェクトに特化したエージェントを定義するディレクトリ。各エージェントは .md ファイルで定義し、YAML フロントマターでツール制限や権限モードを設定できる。Claude が Task ツールを使うとき、ここに定義されたエージェントが subagent_type の選択肢として自動表示される。VCS にコミットすることで、チーム全員が同じエージェントセットを利用でき、プロジェクト固有のベストプラクティスを自動化できる。",
          "usage": "特定のフレームワークに精通した「フロントエンド専門エージェント」や、セキュリティ観点でのコードレビューに特化した「セキュリティレビューエージェント」を定義できる。allowed_tools で使えるツールを制限し、プロンプトでドメイン知識を注入する。",
          "vcs": true,
          "recommended": "optional"
        },
        {
          "path": "skills/<skill-name>/SKILL.md",
          "type": "file",
          "name": "プロジェクトスキル",
          "description": "プロジェクト固有のスキル",
          "detail": "プロジェクトに特化した再利用可能なワークフローを定義する。SKILL.md に処理内容を記述し、補助ファイル（テンプレート、設定ファイル等）を同じディレクトリに配置する。context: fork をフロントマターで指定すると、メインの会話コンテキストとは独立したサブエージェントとして実行される。VCS にコミットしてチームで共有できる。",
          "usage": "例えば「新しい API エンドポイントを追加する」スキルを定義し、ルーティング設定・コントローラー・テストファイルの雛形を補助ファイルとして含めることで、一貫性のあるコード生成が可能になる。",
          "vcs": true,
          "recommended": "optional"
        },
        {
          "path": "rules/",
          "type": "directory",
          "name": "モジュラールール",
          "description": "トピック別 .md ファイルでルールを分割管理",
          "detail": "CLAUDE.md を分割してモジュラー管理するためのディレクトリ。Claude はこのディレクトリ内のすべての .md ファイルを自動的に読み込む。サブディレクトリでグループ化も可能（例: frontend/, backend/, infra/）。大規模プロジェクトでは、チーム別にルールを分けて管理するのが効果的。\n\npaths フロントマターを使うとファイルパス条件付きルールを定義できる。例えば testing.md のフロントマターに paths: [\"**/*.test.ts\", \"**/*.spec.ts\"] と書くと、テストファイルを編集するときだけそのルールが適用される。シンボリックリンクを使って、複数プロジェクト間で共通ルールを共有することも可能。",
          "usage": "1ファイル1トピック（例: testing.md, api-design.md, error-handling.md）で管理し、保守性と可読性を向上させる。",
          "vcs": true,
          "recommended": "recommended"
        },
        {
          "path": "hooks/",
          "type": "directory",
          "name": "フックスクリプト",
          "description": "フック用スクリプト置き場（慣習的な配置場所）",
          "detail": "settings.json のフック設定から参照するスクリプトを配置する慣習的なディレクトリ。公式の規約ではないが、フックスクリプトをまとめておくと管理しやすい。フックの種類: PreToolUse（ツール実行前）、PostToolUse（ツール実行後）、Notification（通知時）、Stop（会話終了時）。各フックはシェルスクリプトとして実行され、stdin で JSON コンテキストを受け取る。\n\nVCS にコミットすることで、チーム全員に同じフックが適用される。ただし、フックスクリプトは実行権限（chmod +x）が必要な点に注意。",
          "usage": "例: .claude/hooks/pre-bash.sh で Bash コマンド実行前に危険なコマンドをチェック、.claude/hooks/post-write.sh でファイル書き込み後に自動フォーマットを実行。settings.json の hooks セクションでこれらのスクリプトへのパスを指定する。",
          "vcs": true,
          "recommended": "optional"
        },
        {
          "path": "agent-memory/<agent-name>/",
          "type": "directory",
          "name": "エージェントメモリ（project スコープ）",
          "description": "エージェントの永続メモリ（プロジェクトスコープ）",
          "detail": "エージェントがこのプロジェクト内で会話をまたいで記憶を保持するためのディレクトリ。エージェント定義で memory: project と指定したエージェントが使用する。ユーザースコープ（~/.claude/agent-memory/）との違い: ここに保存されたメモリはこのプロジェクト専用。プロジェクト固有のコンテキスト（アーキテクチャの特徴、過去のデバッグ経験、チーム固有のパターン等）を蓄積する。",
          "usage": "VCS にコミットすると、チーム全員のエージェントが同じメモリベースを共有できる。逆に、個人的なメモリは agent-memory-local/ を使う。",
          "vcs": true,
          "recommended": "optional"
        },
        {
          "path": "agent-memory-local/<agent-name>/",
          "type": "directory",
          "name": "エージェントメモリ（local スコープ）",
          "description": "エージェントの永続メモリ（ローカル専用）",
          "detail": "自動的に .gitignore に追加されるローカル専用のエージェントメモリ。エージェント定義で memory: local と指定したエージェントが使用する。個人的な作業コンテキストを保持するのに適している。チームには共有されないため、個人的な試行錯誤の記録も気兼ねなく保存できる。",
          "usage": "自分だけのデバッグ履歴、個人的な作業メモ、ローカル環境固有の情報を保存する。project スコープとの使い分け: チームで共有すべき学びは agent-memory/（project）、個人的なメモは agent-memory-local/（local）に保存する。",
          "vcs": false,
          "recommended": "optional"
        }
      ],
      "bestPractices": [
        "rules/ は1ファイル1トピックで管理する（testing.md, api-design.md など）",
        "rules/ のサブディレクトリでグループ化可能（frontend/, backend/）",
        "paths フロントマターでファイルパス条件付きルールを定義できる（例: src/api/ 配下のファイルにのみ適用）",
        "settings.json では deny ルールを allow より先に定義する（deny → ask → allow の順で評価）"
      ]
    },
    {
      "id": "home",
      "name": "ホームディレクトリ",
      "basePath": "~/",
      "description": "ホームディレクトリ直下の設定ファイル。",
      "entries": [
        {
          "path": ".claude.json",
          "type": "file",
          "name": "ユーザー MCP 設定",
          "description": "ユーザースコープの MCP 設定・OAuth・キャッシュ",
          "detail": "ユーザーレベルの MCP サーバー設定、OAuth 認証情報、キャッシュデータなどが格納されるファイル。Claude Code が自動的に管理するため、直接編集する機会は少ない。プロジェクト横断で使いたい MCP サーバー（例: Slack 連携、GitHub 連携、ブラウザ自動化など）はここに定義する。プロジェクト固有の MCP サーバーは .mcp.json（プロジェクトルート）に定義するのが推奨。\n\n注意: OAuth トークンなどの認証情報も含まれるため、このファイルは絶対に VCS にコミットしないこと。",
          "usage": "claude mcp add コマンドで MCP サーバーを追加すると、自動的にこのファイルが更新される。手動で JSON を編集するよりも、CLI コマンドを使うほうが安全。",
          "vcs": false,
          "recommended": "optional"
        }
      ],
      "bestPractices": [
        "API キーを直接ファイルにハードコードしない。apiKeyHelper スクリプトで動的認証情報を使うのが推奨"
      ]
    },
    {
      "id": "managed",
      "name": "マネージド設定（企業管理者向け）",
      "basePath": "OS 固有パス",
      "description": "企業の管理者がユーザーの設定を統制するための設定ファイル。最優先で適用され、ユーザーによるオーバーライドは不可。",
      "entries": [
        {
          "path": "managed-settings.json",
          "type": "file",
          "name": "マネージド設定",
          "description": "管理者が強制する設定（macOS: /Library/Application Support/ClaudeCode/ | Linux: /etc/claude-code/）",
          "detail": "企業のセキュリティポリシーに基づいた設定を強制するためのファイル。設定の優先順位では最上位（レベル1）に位置し、ユーザーやプロジェクトの設定ではオーバーライドできない。配置場所は OS によって異なる: macOS は /Library/Application Support/ClaudeCode/、Linux は /etc/claude-code/。一般の開発者がこのファイルを作成・編集することは通常ない。企業の IT 管理者やセキュリティチームが管理する。",
          "usage": "permissions.deny で機密操作をブロックしたり、使用可能なツールを制限する。例:「本番環境の DB に接続するコマンドを全面禁止」「特定の外部 API へのアクセスをブロック」。MDM（モバイルデバイス管理）ツールで配布するのが一般的。",
          "vcs": null,
          "recommended": "advanced"
        },
        {
          "path": "managed-mcp.json",
          "type": "file",
          "name": "マネージド MCP 設定",
          "description": "管理者が強制する MCP サーバー設定",
          "detail": "企業全体で使用する MCP サーバーの設定を管理者が定義するファイル。ユーザーはこの設定をオーバーライドできない。配置場所は managed-settings.json と同じ OS 固有のパス。",
          "usage": "社内の共通ツール（内部 API ゲートウェイ、社内ドキュメント検索、監査ログ収集など）を MCP サーバーとして全社員に強制配布する。apiKeyHelper を活用して、認証情報は社内の秘密管理サービスから動的に取得するのが推奨。",
          "vcs": null,
          "recommended": "advanced"
        },
        {
          "path": "CLAUDE.md",
          "type": "file",
          "name": "マネージド指示ファイル",
          "description": "管理者が強制する指示ファイル",
          "detail": "企業全体のコーディング規約やセキュリティガイドラインを Claude に強制適用するファイル。ユーザーの CLAUDE.md やプロジェクトの CLAUDE.md よりも優先される。配置場所は managed-settings.json と同じ OS 固有のパス。通常は MDM や構成管理ツール（Ansible, Chef 等）で配布する。個人開発者が直接触ることはほぼない。",
          "usage": "記載例：「すべてのコードにライセンスヘッダーを付与する」「機密データ（PII）をログに出力しない」「社内ライブラリの特定バージョンを使用する」など、企業ポリシーとして全員に適用したいルールを記載する。",
          "vcs": null,
          "recommended": "advanced"
        }
      ],
      "bestPractices": [
        "macOS: /Library/Application Support/ClaudeCode/ に配置",
        "Linux: /etc/claude-code/ に配置",
        "企業のセキュリティポリシーを一元管理し、ユーザーによるオーバーライドを防ぐ目的で使う"
      ]
    }
  ],
  "precedence": [
    { "level": 1, "name": "Managed", "description": "最優先。企業管理者が設定。オーバーライド不可。", "color": "red" },
    { "level": 2, "name": "コマンドライン引数", "description": "CLI 実行時に指定するオプション。", "color": "orange" },
    { "level": 3, "name": "Local", "description": ".claude/settings.local.json（個人×プロジェクト）", "color": "yellow" },
    { "level": 4, "name": "Project", "description": ".claude/settings.json（チーム共有）", "color": "green" },
    { "level": 5, "name": "User", "description": "~/.claude/settings.json（全プロジェクト共通の個人設定）", "color": "blue" }
  ],
  "commitGuide": {
    "commit": [
      "CLAUDE.md（プロジェクトルート）",
      ".claude/settings.json",
      ".mcp.json",
      ".claude/commands/",
      ".claude/agents/",
      ".claude/skills/",
      ".claude/rules/",
      ".claude/hooks/",
      ".claude/agent-memory/"
    ],
    "noCommit": [
      "settings.local.json（自動 gitignore）",
      "CLAUDE.local.md（自動 gitignore）",
      "agent-memory-local/（自動 gitignore）",
      "~/.claude/ 配下すべて（個人設定）",
      "~/.claude.json（個人 MCP 設定）"
    ]
  },
  "skillsVsAgents": {
    "skills": {
      "description": "再利用可能なプロンプト・ワークフロー",
      "characteristics": [
        "SKILL.md + 補助ファイルで構成",
        "context: fork でサブエージェントとして実行可能",
        "ユーザーがスラッシュコマンドとして呼び出す",
        "メインコンテキストを共有または分離して実行"
      ]
    },
    "agents": {
      "description": "独立したコンテキストで動く特化型 AI",
      "characteristics": [
        "ツール制限・権限モード設定可能",
        "Task ツールから自動的に利用される",
        "独立したコンテキストウィンドウで動作",
        "特定のタスクに最適化した振る舞いを定義"
      ]
    }
  }
}
