import type { Callout } from "~/components/callout-box";
import type { CodeBlock } from "~/components/code-block-view";
import customizationData from "~/data/customization/customization.json";

export interface CustomizationItem {
  id: string;
  title: string;
  description: string;
  content: string;
  code: CodeBlock[];
  callouts: Callout[];
  tags: string[];
}

export interface CustomizationTab {
  id: string;
  name: string;
  description: string;
  items: CustomizationItem[];
}

export const TABS = customizationData.tabs as CustomizationTab[];

export const TOTAL_ITEMS = TABS.reduce((sum, t) => sum + t.items.length, 0);

export const TAB_COLORS: Record<string, string> = {
  skills: "#F9A8D4",
  mcp: "#5EEAD4",
  hooks: "#FDBA74",
};

export const TAB_ICONS: Record<string, () => React.JSX.Element> = {
  skills: () => (
    <svg
      width="16"
      height="16"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    >
      <path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z" />
      <path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" />
      <path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z" />
      <path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z" />
      <path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z" />
      <path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z" />
      <path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z" />
      <path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z" />
    </svg>
  ),
  mcp: () => (
    <svg
      width="16"
      height="16"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    >
      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
    </svg>
  ),
  hooks: () => (
    <svg
      width="16"
      height="16"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    >
      <polyline points="16 18 22 12 16 6" />
      <polyline points="8 6 2 12 8 18" />
    </svg>
  ),
};

export const DEFAULT_TAG_COLOR = { color: "#94A3B8", bg: "rgba(148, 163, 184, 0.15)" };

export const TAG_COLORS: Record<string, { color: string; bg: string }> = {
  上級者向け: { color: "#C4B5FD", bg: "rgba(139, 92, 246, 0.15)" },
  チーム向け: { color: "#67E8F9", bg: "rgba(6, 182, 212, 0.15)" },
};

export function matchesQuery(fields: (string | null)[], lowerQuery: string): boolean {
  if (!lowerQuery) return true;
  return fields.some((f) => f != null && f.toLowerCase().includes(lowerQuery));
}
